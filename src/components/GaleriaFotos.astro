---
// Galeria.astro
---

<section class="py-4 px-4 relative overflow-hidden">

    <div class="max-w-7xl sm:max-w-sm md:max-w-xl mx-auto relative z-10">
        
        <!-- T√çTULO ULTRA ELEGANTE -->
        <div class="text-center mb-20" id="titulo-galeria">
            <!-- L√≠nea superior decorativa -->
            <div class="flex items-center justify-center gap-6 mb-8">
                <div class="w-16 h-px bg-gradient-to-r from-transparent to-[#C9A961]/60"></div>
                <div class="relative">
                    <div class="w-2 h-2 bg-[#C9A961] rounded-full"></div>
                    <div class="absolute inset-0 w-2 h-2 bg-[#C9A961] rounded-full animate-ping"></div>
                </div>
                <div class="w-16 h-px bg-gradient-to-l from-transparent to-[#C9A961]/60"></div>
            </div>

            <h2 class="font-charm text-2xl md:text-3xl lg:text-3xl text-[#C9A961] font-bold mb-4 tracking-wide relative inline-block">
                NUESTRA HISTORIA
                <div class="absolute -bottom-2 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-[#C9A961]/30 to-transparent"></div>
            </h2>
            
            <p class="font-charm text-2xl md:text-3xl text-[#8b7355] italic mt-8 max-w-3xl mx-auto leading-relaxed">
                Cada momento capturado es un tesoro eterno
            </p>

            <!-- Ornamento inferior -->
            <div class="flex items-center justify-center gap-6 mt-8">
                <div class="w-16 h-px bg-gradient-to-r from-transparent to-[#C9A961]/60"></div>
                <div class="relative">
                    <div class="w-2 h-2 bg-[#C9A961] rounded-full"></div>
                    <div class="absolute inset-0 w-2 h-2 bg-[#C9A961] rounded-full animate-ping"></div>
                </div>
                <div class="w-16 h-px bg-gradient-to-l from-transparent to-[#C9A961]/60"></div>
            </div>
        </div>

        <!-- GRID DE FOTOS CON DISE√ëO BENTO PREMIUM - 5 FOTOS -->
        <div class="grid grid-cols-12 gap-5 md:gap-7">
            
            <!-- FOTO 1 - Hero Extra Grande -->
            <div class="col-span-12 md:col-span-7 foto-card group cursor-pointer" data-index="0">
                <div class="relative overflow-hidden rounded-[2rem] transition-all duration-700 aspect-[16/10] bg-gradient-to-br from-[#C9A961]/5 to-transparent border border-[#C9A961]/10 hover:border-[#C9A961]/30">
                    <img
                        src="/imagenes/Foto1.webp"
                        alt="Momento 1"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-1000 ease-out"
                    />
                    <!-- Overlay premium con gradiente -->
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-40 group-hover:opacity-70 transition-opacity duration-500"></div>
                    <div class="absolute inset-0 bg-gradient-to-br from-[#C9A961]/0 via-[#C9A961]/10 to-[#C9A961]/30 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                    
                    <!-- Marco interno elegante -->
                    <div class="absolute inset-6 border border-white/0 group-hover:border-white/40 rounded-3xl transition-all duration-700 pointer-events-none"></div>
                    
                    <!-- Lupa elegante con glassmorphism -->
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 transition-all duration-500">
                        <div class="relative">
                            <!-- C√≠rculo exterior con blur -->
                            <div class="w-24 h-24 rounded-full bg-white/20 backdrop-blur-2xl flex items-center justify-center shadow-2xl border-2 border-white/40">
                                <!-- Lupa SVG elegante -->
                                <svg class="w-12 h-12 text-white drop-shadow-2xl" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-linecap="round">
                                    <circle cx="10.5" cy="10.5" r="6.5" stroke-width="2.5"/>
                                    <path d="M15.5 15.5L21 21" stroke-width="2.5"/>
                                    <!-- Efecto de brillo en el cristal de la lupa -->
                                    <path d="M13 8.5a3.5 3.5 0 00-5 0" stroke="white" stroke-width="1.8" opacity="0.5"/>
                                </svg>
                            </div>
                            <!-- Anillo dorado exterior pulsante -->
                            <div class="absolute inset-0 w-24 h-24 rounded-full border-2 border-[#C9A961]/60 animate-ping-slow"></div>
                            <!-- Resplandor dorado difuso -->
                            <div class="absolute inset-0 w-24 h-24 rounded-full bg-[#C9A961]/20 blur-2xl"></div>
                        </div>
                    </div>
                    
                    <!-- Etiqueta flotante elegante -->
                    <div class="absolute bottom-6 left-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0">
                        <div class="bg-white/95 backdrop-blur-xl px-6 py-3 rounded-2xl shadow-xl border border-[#C9A961]/20">
                            <span class="text-[#C9A961] font-charm text-lg font-semibold">Momento Especial 1</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOTO 2 - Mediana Vertical -->
            <div class="col-span-6 md:col-span-5 foto-card group cursor-pointer" data-index="1">
                <div class="relative overflow-hidden rounded-[2rem] transition-all duration-700 aspect-[3/4] bg-gradient-to-br from-[#C9A961]/5 to-transparent border border-[#C9A961]/10 hover:border-[#C9A961]/30">
                    <img
                        src="/imagenes/Foto2.webp"
                        alt="Momento 2"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-1000 ease-out"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-40 group-hover:opacity-70 transition-opacity duration-500"></div>
                    <div class="absolute inset-0 bg-gradient-to-br from-[#C9A961]/0 via-[#C9A961]/10 to-[#C9A961]/30 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                    <div class="absolute inset-6 border border-white/0 group-hover:border-white/40 rounded-3xl transition-all duration-700 pointer-events-none"></div>
                    
                    <!-- Lupa elegante con glassmorphism -->
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 transition-all duration-500">
                        <div class="relative">
                            <div class="w-20 h-20 rounded-full bg-white/20 backdrop-blur-2xl flex items-center justify-center shadow-2xl border-2 border-white/40">
                                <svg class="w-10 h-10 text-white drop-shadow-2xl" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-linecap="round">
                                    <circle cx="10.5" cy="10.5" r="6.5" stroke-width="2.5"/>
                                    <path d="M15.5 15.5L21 21" stroke-width="2.5"/>
                                    <path d="M13 8.5a3.5 3.5 0 00-5 0" stroke="white" stroke-width="1.8" opacity="0.5"/>
                                </svg>
                            </div>
                            <div class="absolute inset-0 w-20 h-20 rounded-full border-2 border-[#C9A961]/60 animate-ping-slow"></div>
                            <div class="absolute inset-0 w-20 h-20 rounded-full bg-[#C9A961]/20 blur-2xl"></div>
                        </div>
                    </div>

                    <div class="absolute bottom-6 left-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0">
                        <div class="bg-white/95 backdrop-blur-xl px-5 py-2.5 rounded-2xl shadow-xl border border-[#C9A961]/20">
                            <span class="text-[#C9A961] font-charm text-base font-semibold">Momento 2</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOTO 3 - Mediana Vertical -->
            <div class="col-span-6 md:col-span-5 foto-card group cursor-pointer" data-index="2">
                <div class="relative overflow-hidden rounded-[2rem] transition-all duration-700 aspect-[3/4] bg-gradient-to-br from-[#C9A961]/5 to-transparent border border-[#C9A961]/10 hover:border-[#C9A961]/30">
                    <img
                        src="/imagenes/Foto3.webp"
                        alt="Momento 3"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-1000 ease-out"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-40 group-hover:opacity-70 transition-opacity duration-500"></div>
                    <div class="absolute inset-0 bg-gradient-to-br from-[#C9A961]/0 via-[#C9A961]/10 to-[#C9A961]/30 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                    <div class="absolute inset-6 border border-white/0 group-hover:border-white/40 rounded-3xl transition-all duration-700 pointer-events-none"></div>
                    
                    <!-- Lupa elegante con glassmorphism -->
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 transition-all duration-500">
                        <div class="relative">
                            <div class="w-20 h-20 rounded-full bg-white/20 backdrop-blur-2xl flex items-center justify-center shadow-2xl border-2 border-white/40">
                                <svg class="w-10 h-10 text-white drop-shadow-2xl" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-linecap="round">
                                    <circle cx="10.5" cy="10.5" r="6.5" stroke-width="2.5"/>
                                    <path d="M15.5 15.5L21 21" stroke-width="2.5"/>
                                    <path d="M13 8.5a3.5 3.5 0 00-5 0" stroke="white" stroke-width="1.8" opacity="0.5"/>
                                </svg>
                            </div>
                            <div class="absolute inset-0 w-20 h-20 rounded-full border-2 border-[#C9A961]/60 animate-ping-slow"></div>
                            <div class="absolute inset-0 w-20 h-20 rounded-full bg-[#C9A961]/20 blur-2xl"></div>
                        </div>
                    </div>

                    <div class="absolute bottom-6 left-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0">
                        <div class="bg-white/95 backdrop-blur-xl px-5 py-2.5 rounded-2xl shadow-xl border border-[#C9A961]/20">
                            <span class="text-[#C9A961] font-charm text-base font-semibold">Momento 3</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOTO 4 - Grande Horizontal -->
            <div class="col-span-12 md:col-span-7 foto-card group cursor-pointer" data-index="3">
                <div class="relative overflow-hidden rounded-[2rem] transition-all duration-700 aspect-[16/9] bg-gradient-to-br from-[#C9A961]/5 to-transparent border border-[#C9A961]/10 hover:border-[#C9A961]/30">
                    <img
                        src="/imagenes/Foto4.webp"
                        alt="Momento 4"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-1000 ease-out"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-40 group-hover:opacity-70 transition-opacity duration-500"></div>
                    <div class="absolute inset-0 bg-gradient-to-br from-[#C9A961]/0 via-[#C9A961]/10 to-[#C9A961]/30 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                    <div class="absolute inset-6 border border-white/0 group-hover:border-white/40 rounded-3xl transition-all duration-700 pointer-events-none"></div>
                    
                    <!-- Lupa elegante con glassmorphism -->
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 transition-all duration-500">
                        <div class="relative">
                            <div class="w-24 h-24 rounded-full bg-white/20 backdrop-blur-2xl flex items-center justify-center shadow-2xl border-2 border-white/40">
                                <svg class="w-12 h-12 text-white drop-shadow-2xl" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-linecap="round">
                                    <circle cx="10.5" cy="10.5" r="6.5" stroke-width="2.5"/>
                                    <path d="M15.5 15.5L21 21" stroke-width="2.5"/>
                                    <path d="M13 8.5a3.5 3.5 0 00-5 0" stroke="white" stroke-width="1.8" opacity="0.5"/>
                                </svg>
                            </div>
                            <div class="absolute inset-0 w-24 h-24 rounded-full border-2 border-[#C9A961]/60 animate-ping-slow"></div>
                            <div class="absolute inset-0 w-24 h-24 rounded-full bg-[#C9A961]/20 blur-2xl"></div>
                        </div>
                    </div>

                    <div class="absolute bottom-6 left-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0">
                        <div class="bg-white/95 backdrop-blur-xl px-6 py-3 rounded-2xl shadow-xl border border-[#C9A961]/20">
                            <span class="text-[#C9A961] font-charm text-lg font-semibold">Momento Especial 4</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FOTO 5 - Cuadrada Centrada -->
            <div class="col-span-12 md:col-span-12 flex justify-center foto-card group cursor-pointer" data-index="4">
                <div class="relative overflow-hidden rounded-[2rem] transition-all duration-700 aspect-square w-full md:w-1/2 bg-gradient-to-br from-[#C9A961]/5 to-transparent border border-[#C9A961]/10 hover:border-[#C9A961]/30">
                    <img
                        src="/imagenes/Foto5.webp"
                        alt="Momento 5"
                        class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-1000 ease-out"
                    />
                    <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-40 group-hover:opacity-70 transition-opacity duration-500"></div>
                    <div class="absolute inset-0 bg-gradient-to-br from-[#C9A961]/0 via-[#C9A961]/10 to-[#C9A961]/30 opacity-0 group-hover:opacity-100 transition-opacity duration-700"></div>
                    <div class="absolute inset-6 border border-white/0 group-hover:border-white/40 rounded-3xl transition-all duration-700 pointer-events-none"></div>
                    
                    <!-- Lupa elegante con glassmorphism -->
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 scale-50 group-hover:scale-100 transition-all duration-500">
                        <div class="relative">
                            <div class="w-20 h-20 rounded-full bg-white/20 backdrop-blur-2xl flex items-center justify-center shadow-2xl border-2 border-white/40">
                                <svg class="w-10 h-10 text-white drop-shadow-2xl" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-linecap="round">
                                    <circle cx="10.5" cy="10.5" r="6.5" stroke-width="2.5"/>
                                    <path d="M15.5 15.5L21 21" stroke-width="2.5"/>
                                    <path d="M13 8.5a3.5 3.5 0 00-5 0" stroke="white" stroke-width="1.8" opacity="0.5"/>
                                </svg>
                            </div>
                            <div class="absolute inset-0 w-20 h-20 rounded-full border-2 border-[#C9A961]/60 animate-ping-slow"></div>
                            <div class="absolute inset-0 w-20 h-20 rounded-full bg-[#C9A961]/20 blur-2xl"></div>
                        </div>
                    </div>

                    <div class="absolute bottom-6 left-6 opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-y-4 group-hover:translate-y-0">
                        <div class="bg-white/95 backdrop-blur-xl px-5 py-2.5 rounded-2xl shadow-xl border border-[#C9A961]/20">
                            <span class="text-[#C9A961] font-charm text-base font-semibold">Momento 5</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!-- ORNAMENTO INFERIOR MINIMALISTA -->
        <div class="flex justify-center mt-20" id="ornamento-inferior">
            <div class="flex items-center gap-4">
                <div class="w-24 h-px bg-gradient-to-r from-transparent to-[#C9A961]/60"></div>
                <div class="relative">
                    <div class="w-2.5 h-2.5 bg-[#C9A961] rounded-full"></div>
                    <div class="absolute inset-0 w-2.5 h-2.5 bg-[#C9A961] rounded-full animate-ping"></div>
                </div>
                <div class="w-24 h-px bg-gradient-to-l from-transparent to-[#C9A961]/60"></div>
            </div>
        </div>

    </div>

    <!-- üñºÔ∏è MODAL ULTRA PREMIUM CON CARRUSEL -->
    <div id="modal-galeria" class="fixed inset-0 bg-black/97 backdrop-blur-3xl z-50 hidden items-center justify-center">
        
        <!-- Bot√≥n cerrar minimalista -->
        <button id="cerrar-modal" class="absolute top-6 right-6 md:top-10 md:right-10 w-14 h-14 md:w-16 md:h-16 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-2xl flex items-center justify-center transition-all duration-300 group z-50 border border-white/20 hover:border-white/40 hover:rotate-90">
            <svg class="w-6 h-6 md:w-7 md:h-7 text-white transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </button>

        <!-- Contenedor principal -->
        <div class="relative w-full h-full flex items-center justify-center px-2 md:px-16 lg:px-24">
            
            <!-- Bot√≥n anterior -->
            <button id="btn-anterior" class="absolute left-4 md:left-8 lg:left-12 w-14 h-14 md:w-16 md:h-16 rounded-full bg-white/10 hover:bg-[#C9A961]/30 backdrop-blur-2xl flex items-center justify-center transition-all duration-300 z-40 border border-white/20 hover:border-[#C9A961]/50 group hover:scale-110">
                <svg class="w-7 h-7 text-white group-hover:-translate-x-0.5 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7" />
                </svg>
            </button>

            <!-- Contenedor de carrusel -->
            <div class="relative max-w-6xl w-full overflow-hidden" id="modal-contenido">
                
                <!-- Track del carrusel -->
                <div id="carrusel-track" class="flex transition-transform duration-700 ease-out">
                    <!-- Las im√°genes se generar√°n din√°micamente -->
                </div>

                <!-- Informaci√≥n de la foto -->
                <div class="absolute top-6 left-6 md:top-8 md:left-8 z-30 opacity-0 animate-fade-in" id="info-foto">
                    <div class="bg-white/10 backdrop-blur-2xl px-6 py-3 md:px-8 md:py-4 rounded-2xl border border-white/20 shadow-2xl">
                        <p class="text-white font-charm text-base md:text-lg font-semibold" id="titulo-foto">Momento Especial</p>
                    </div>
                </div>

                <!-- Contador minimalista -->
                <div class="absolute bottom-6 left-1/2 -translate-x-1/2 z-30">
                    <div class="bg-white/10 backdrop-blur-2xl px-8 py-4 rounded-full border border-white/20 shadow-2xl">
                        <div class="flex items-center gap-4">
                            <span id="numero-actual" class="text-white font-charm text-2xl md:text-3xl font-bold">1</span>
                            <div class="w-px h-8 bg-white/30"></div>
                            <span id="numero-total" class="text-white/60 font-charm text-xl md:text-2xl">5</span>
                        </div>
                    </div>
                </div>

                <!-- Miniaturas premium -->
                <div class="absolute bottom-24 left-1/2 -translate-x-1/2 z-30 hidden md:block">
                    <div class="flex gap-3 bg-white/5 backdrop-blur-2xl px-6 py-4 rounded-full border border-white/10">
                        <div id="miniaturas-nav" class="flex gap-3">
                            <!-- Se generar√°n din√°micamente -->
                        </div>
                    </div>
                </div>

            </div>

            <!-- Bot√≥n siguiente -->
            <button id="btn-siguiente" class="absolute right-4 md:right-8 lg:right-12 w-14 h-14 md:w-16 md:h-16 rounded-full bg-white/10 hover:bg-[#C9A961]/30 backdrop-blur-2xl flex items-center justify-center transition-all duration-300 z-40 border border-white/20 hover:border-[#C9A961]/50 group hover:scale-110">
                <svg class="w-7 h-7 text-white group-hover:translate-x-0.5 transition-transform duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7" />
                </svg>
            </button>

        </div>

    </div>

</section>

<script>
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";

    gsap.registerPlugin(ScrollTrigger);

    if (typeof window !== 'undefined') {
        document.addEventListener("DOMContentLoaded", () => {
            console.log("üì∏ Iniciando galer√≠a ultra premium...");

            // üéØ ESTADO INICIAL
            gsap.set("#titulo-galeria", { opacity: 0, y: -40 });
            gsap.set(".foto-card", { opacity: 0, y: 60, scale: 0.9 });
            gsap.set("#ornamento-inferior", { opacity: 0, scale: 0.8 });

            // ‚ú® ANIMACI√ìN DEL T√çTULO - CON TOGGLEACTIONS
            ScrollTrigger.create({
                trigger: "#titulo-galeria",
                start: "top 85%",
                end: "bottom 20%",
                toggleActions: "play none none reverse",
                animation: gsap.to("#titulo-galeria", {
                    opacity: 1,
                    y: 0,
                    duration: 1.4,
                    ease: "power3.out",
                    paused: true
                })
            });

            // ‚ú® ANIMACI√ìN DE FOTOS CON EFECTO CASCADA - CON TOGGLEACTIONS
            ScrollTrigger.create({
                trigger: ".foto-card",
                start: "top 100%",
                end: "bottom 20%",
                toggleActions: "play none none reverse",
                animation: gsap.to(".foto-card", {
                    opacity: 1,
                    scale: 1,
                    y: 0,
                    duration: 1,
                    stagger: {
                        amount: 0.6,
                        from: "start",
                        ease: "power2.out"
                    },
                    ease: "power3.out",
                    paused: true
                })
            });

            // ‚ú® ANIMACI√ìN ORNAMENTO INFERIOR - CON TOGGLEACTIONS
            ScrollTrigger.create({
                trigger: "#ornamento-inferior",
                start: "top 95%",
                end: "bottom 20%",
                toggleActions: "play none none reverse",
                animation: gsap.to("#ornamento-inferior", {
                    opacity: 1,
                    scale: 1,
                    duration: 1,
                    ease: "back.out(1.7)",
                    paused: true
                })
            });

            // üñºÔ∏è SISTEMA DE CARRUSEL ULTRA PREMIUM - 5 FOTOS
            const fotos = [
                { src: "/imagenes/Foto1.webp", titulo: "Momento Especial 1" },
                { src: "/imagenes/Foto2.webp", titulo: "Momento Especial 2" },
                { src: "/imagenes/Foto3.webp", titulo: "Momento Especial 3" },
                { src: "/imagenes/Foto4.webp", titulo: "Momento Especial 4" },
                { src: "/imagenes/Foto5.webp", titulo: "Momento Especial 5" }
            ];

            let indiceActual = 0;
            const modal = document.getElementById("modal-galeria");
            const carruselTrack = document.getElementById("carrusel-track");
            const numeroActual = document.getElementById("numero-actual");
            const numeroTotal = document.getElementById("numero-total");
            const tituloFoto = document.getElementById("titulo-foto");
            const infoFoto = document.getElementById("info-foto");
            const miniaturasNav = document.getElementById("miniaturas-nav");
            const btnAnterior = document.getElementById("btn-anterior");
            const btnSiguiente = document.getElementById("btn-siguiente");
            const cerrarModal = document.getElementById("cerrar-modal");

            // Generar slides del carrusel
            if (carruselTrack && numeroTotal) {
                numeroTotal.textContent = fotos.length.toString();
                
                fotos.forEach((foto, index) => {
                    const slide = document.createElement("div");
                    slide.className = "min-w-full flex items-center justify-center px-4 md:px-12";
                    slide.innerHTML = `
                        <div class="relative max-w-5xl w-full">
                            <div class="absolute -inset-12 bg-gradient-to-r from-[#C9A961]/20 via-[#d4b16e]/30 to-[#C9A961]/20 rounded-3xl blur-3xl opacity-50"></div>
                            <div class="relative backdrop-blur-sm rounded-3xl overflow-hidden border-2 border-white/10 shadow-2xl">
                                <img src="${foto.src}" alt="${foto.titulo}" class="w-full h-auto max-h-[75vh] md:max-h-[82vh] object-contain bg-black/20" />
                                <div class="absolute inset-0 bg-gradient-to-br from-transparent via-transparent to-black/20 pointer-events-none"></div>
                            </div>
                        </div>
                    `;
                    carruselTrack.appendChild(slide);
                });
            }

            // Crear miniaturas elegantes
            if (miniaturasNav) {
                fotos.forEach((foto, index) => {
                    const mini = document.createElement("button");
                    mini.className = "miniatura transition-all duration-300 hover:scale-110 focus:outline-none";
                    mini.dataset.index = index.toString();
                    mini.innerHTML = `
                        <div class="relative">
                            <div class="w-3 h-3 rounded-full bg-white/30 transition-all duration-300"></div>
                        </div>
                    `;
                    miniaturasNav.appendChild(mini);
                });
            }

            const actualizarCarrusel = (nuevo: number, animacion: boolean = true) => {
                if (!carruselTrack) return;
                
                indiceActual = (nuevo + fotos.length) % fotos.length;
                const desplazamiento = -indiceActual * 100;
                
                if (animacion) {
                    gsap.to(carruselTrack, {
                        x: `${desplazamiento}%`,
                        duration: 0.7,
                        ease: "power3.out"
                    });
                } else {
                    gsap.set(carruselTrack, { x: `${desplazamiento}%` });
                }

                if (numeroActual) {
                    gsap.to(numeroActual, {
                        scale: 1.2,
                        duration: 0.2,
                        ease: "power2.out",
                        onComplete: () => {
                            numeroActual.textContent = (indiceActual + 1).toString();
                            gsap.to(numeroActual, {
                                scale: 1,
                                duration: 0.2,
                                ease: "power2.in"
                            });
                        }
                    });
                }

                if (tituloFoto) {
                    gsap.to(tituloFoto, {
                        opacity: 0,
                        y: -10,
                        duration: 0.2,
                        ease: "power2.in",
                        onComplete: () => {
                            tituloFoto.textContent = fotos[indiceActual].titulo;
                            gsap.to(tituloFoto, {
                                opacity: 1,
                                y: 0,
                                duration: 0.3,
                                ease: "power2.out"
                            });
                        }
                    });
                }

                document.querySelectorAll('.miniatura').forEach((mini, idx) => {
                    const dot = mini.querySelector('div > div');
                    if (idx === indiceActual) {
                        gsap.to(dot, {
                            width: '2rem',
                            height: '0.75rem',
                            borderRadius: '9999px',
                            backgroundColor: '#C9A961',
                            duration: 0.4,
                            ease: "power2.out"
                        });
                    } else {
                        gsap.to(dot, {
                            width: '0.75rem',
                            height: '0.75rem',
                            borderRadius: '9999px',
                            backgroundColor: 'rgba(255, 255, 255, 0.3)',
                            duration: 0.4,
                            ease: "power2.out"
                        });
                    }
                });
            };

            const abrirModal = (indice: number) => {
                indiceActual = indice;
                if (modal) {
                    modal.classList.remove("hidden");
                    modal.classList.add("flex");
                    document.body.style.overflow = 'hidden';
                    
                    actualizarCarrusel(indice, false);
                    
                    gsap.fromTo(modal, 
                        { opacity: 0 },
                        { opacity: 1, duration: 0.4, ease: "power2.out" }
                    );
                    
                    gsap.fromTo("#modal-contenido", 
                        { scale: 0.85, opacity: 0 },
                        { scale: 1, opacity: 1, duration: 0.6, ease: "power3.out", delay: 0.1 }
                    );

                    gsap.fromTo("#info-foto", 
                        { opacity: 0, x: -20 },
                        { opacity: 1, x: 0, duration: 0.5, ease: "power2.out", delay: 0.3 }
                    );

                    gsap.fromTo([btnAnterior, btnSiguiente, cerrarModal], 
                        { opacity: 0, scale: 0.8 },
                        { opacity: 1, scale: 1, duration: 0.4, ease: "back.out(2)", delay: 0.2, stagger: 0.05 }
                    );
                }
            };

            const cerrarModalFn = () => {
                if (modal) {
                    gsap.to([btnAnterior, btnSiguiente, cerrarModal, "#info-foto"], {
                        opacity: 0,
                        scale: 0.8,
                        duration: 0.2,
                        ease: "power2.in"
                    });

                    gsap.to("#modal-contenido", {
                        scale: 0.85,
                        opacity: 0,
                        duration: 0.3,
                        ease: "power2.in"
                    });
                    
                    gsap.to(modal, {
                        opacity: 0,
                        duration: 0.3,
                        ease: "power2.in",
                        delay: 0.1,
                        onComplete: () => {
                            modal.classList.add("hidden");
                            modal.classList.remove("flex");
                            document.body.style.overflow = '';
                        }
                    });
                }
            };

            // Eventos de click en fotos
            document.querySelectorAll(".foto-card").forEach(card => {
                card.addEventListener("click", () => {
                    const indice = parseInt(card.getAttribute("data-index") || "0");
                    abrirModal(indice);
                });
            });

            btnAnterior?.addEventListener("click", (e) => {
                e.stopPropagation();
                actualizarCarrusel(indiceActual - 1);
            });

            btnSiguiente?.addEventListener("click", (e) => {
                e.stopPropagation();
                actualizarCarrusel(indiceActual + 1);
            });

            document.querySelectorAll('.miniatura').forEach(mini => {
                mini.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const nuevoIndice = parseInt((mini as HTMLElement).dataset.index || "0");
                    actualizarCarrusel(nuevoIndice);
                });
            });

            cerrarModal?.addEventListener("click", (e) => {
                e.stopPropagation();
                cerrarModalFn();
            });

            document.addEventListener("keydown", (e) => {
                if (modal && !modal.classList.contains("hidden")) {
                    if (e.key === "Escape") {
                        cerrarModalFn();
                    } else if (e.key === "ArrowLeft") {
                        actualizarCarrusel(indiceActual - 1);
                    } else if (e.key === "ArrowRight") {
                        actualizarCarrusel(indiceActual + 1);
                    }
                }
            });

            modal?.addEventListener("click", (e) => {
                if (e.target === modal) {
                    cerrarModalFn();
                }
            });

            // üì± SOPORTE PARA SWIPE T√ÅCTIL
            let touchStartX = 0;
            let touchEndX = 0;
            let touchStartY = 0;
            let touchEndY = 0;
            let isDragging = false;

            const handleSwipe = () => {
                const diffX = touchStartX - touchEndX;
                const diffY = Math.abs(touchStartY - touchEndY);
                
                if (Math.abs(diffX) > 60 && Math.abs(diffX) > diffY * 2) {
                    if (diffX > 0) {
                        actualizarCarrusel(indiceActual + 1);
                    } else {
                        actualizarCarrusel(indiceActual - 1);
                    }
                }
            };

            modal?.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                isDragging = true;
            }, { passive: true });

            modal?.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    touchEndX = e.touches[0].clientX;
                    touchEndY = e.touches[0].clientY;
                }
            }, { passive: true });

            modal?.addEventListener('touchend', () => {
                if (isDragging) {
                    handleSwipe();
                    isDragging = false;
                }
            });

            console.log("üì∏‚ú® ¬°Galer√≠a ultra premium lista!");
        });
    }
</script>

<style>
    /* Animaciones de tarjetas */
    .foto-card {
        transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    .foto-card::before {
        content: '';
        position: absolute;
        inset: -2px;
        border-radius: 2rem;
        padding: 2px;
        background: linear-gradient(135deg, transparent, rgba(201, 169, 97, 0.3), transparent);
        -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        -webkit-mask-composite: xor;
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.5s ease;
    }

    .foto-card:hover::before {
        opacity: 1;
    }

    .foto-card:hover {
        transform: translateY(-20px) scale(1.02);
        box-shadow: 
            0 40px 80px -20px rgba(201, 169, 97, 0.3),
            0 20px 40px -20px rgba(201, 169, 97, 0.2),
            0 0 100px -20px rgba(201, 169, 97, 0.1);
    }

    /* Animaci√≥n de ping suave */
    @keyframes ping-slow {
        0%, 100% {
            transform: scale(1);
            opacity: 0.3;
        }
        50% {
            transform: scale(1.5);
            opacity: 0;
        }
    }

    .animate-ping {
        animation: ping-slow 2s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    .animate-ping-slow {
        animation: ping-slow 3s cubic-bezier(0, 0, 0.2, 1) infinite;
    }

    /* Animaci√≥n de aparici√≥n */
    @keyframes fade-in {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-fade-in {
        animation: fade-in 0.6s ease-out forwards;
    }

    /* Miniaturas */
    .miniatura {
        cursor: pointer;
    }

    /* Carrusel optimizado */
    #carrusel-track {
        will-change: transform;
    }

    #carrusel-track img {
        will-change: transform;
        backface-visibility: hidden;
    }

    /* Botones con efecto glass */
    button {
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
    }

    button:active {
        transform: scale(0.95);
    }

    /* Mejoras de accesibilidad */
    button:focus-visible {
        outline: 2px solid #C9A961;
        outline-offset: 3px;
    }

    /* Prevenir selecci√≥n */
    .foto-card,
    .miniatura,
    button {
        user-select: none;
        -webkit-user-select: none;
        -webkit-touch-callout: none;
    }

    /* Optimizaci√≥n para m√≥viles */
    @media (max-width: 768px) {
        .foto-card:hover {
            transform: translateY(-12px) scale(1.01);
        }
    }

    /* Smooth scroll */
    #modal-galeria {
        overscroll-behavior: contain;
        -webkit-overflow-scrolling: touch;
    }

    /* Transiciones suaves para el modal */
    #modal-galeria {
        transition: opacity 0.3s ease;
    }

    /* Mejora de rendimiento */
    * {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
</style>+